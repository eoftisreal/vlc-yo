diff --git a/src/proto_roaraudio.c b/src/proto_roaraudio.c
index 041590d..a2b1fb5 100644
--- a/src/proto_roaraudio.c
+++ b/src/proto_roaraudio.c
@@ -111,7 +111,11 @@ static int shout_create_roaraudio_request_ident(shout_t *self, shout_connection_
     size_t      datalen;
     uint8_t    *data;
     const char *agent;
+#ifdef _WIN32
+    uint32_t    pid = GetCurrentProcessId();
+#else
     uint32_t    pid = getpid();
+#endif
 
     /* We implement version 1 IDENTIFY header.
      * It has the following structure:
